{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nvar _jsxFileName = \"D:\\\\develop\\\\pypr\\\\HypeFans\\\\mobile_version\\\\node_modules\\\\expo-image-editor\\\\lib\\\\EditingWindow.js\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EditingWindow = void 0;\n\nvar React = __importStar(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar ImageCropOverlay_1 = require(\"./ImageCropOverlay\");\n\nvar recoil_1 = require(\"recoil\");\n\nvar Store_1 = require(\"./Store\");\n\nvar expo_gl_1 = require(\"expo-gl\");\n\nfunction EditingWindow() {\n  var _this = this;\n\n  var _React$useState = React.useState({\n    imageScaleFactor: null,\n    imageLayout: {\n      height: null,\n      width: null\n    }\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      state = _React$useState2[0],\n      setState = _React$useState2[1];\n\n  var _recoil_1$useRecoilSt = recoil_1.useRecoilState(Store_1.imageDataState),\n      _recoil_1$useRecoilSt2 = _slicedToArray(_recoil_1$useRecoilSt, 1),\n      imageData = _recoil_1$useRecoilSt2[0];\n\n  var _recoil_1$useRecoilSt3 = recoil_1.useRecoilState(Store_1.imageBoundsState),\n      _recoil_1$useRecoilSt4 = _slicedToArray(_recoil_1$useRecoilSt3, 2),\n      setImageBounds = _recoil_1$useRecoilSt4[1];\n\n  var _recoil_1$useRecoilSt5 = recoil_1.useRecoilState(Store_1.imageScaleFactorState),\n      _recoil_1$useRecoilSt6 = _slicedToArray(_recoil_1$useRecoilSt5, 2),\n      setImageScaleFactor = _recoil_1$useRecoilSt6[1];\n\n  var _recoil_1$useRecoilSt7 = recoil_1.useRecoilState(Store_1.editingModeState),\n      _recoil_1$useRecoilSt8 = _slicedToArray(_recoil_1$useRecoilSt7, 1),\n      editingMode = _recoil_1$useRecoilSt8[0];\n\n  var _recoil_1$useRecoilSt9 = recoil_1.useRecoilState(Store_1.glContextState),\n      _recoil_1$useRecoilSt10 = _slicedToArray(_recoil_1$useRecoilSt9, 2),\n      setGLContext = _recoil_1$useRecoilSt10[1];\n\n  var isCropping = editingMode === \"crop\";\n  var isBlurring = editingMode === \"blur\";\n  var usesGL = isBlurring;\n\n  var getImageFrame = function getImageFrame(layout) {\n    onUpdateCropLayout(layout);\n  };\n\n  var onUpdateCropLayout = function onUpdateCropLayout(layout) {\n    if (layout.height != null && layout.width != null) {\n      var editingWindowAspectRatio = layout.height / layout.width;\n      var imageAspectRatio = imageData.height / imageData.width;\n      var bounds = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n      var imageScaleFactor = 1;\n\n      if (imageAspectRatio > editingWindowAspectRatio) {\n        bounds.x = (imageAspectRatio - editingWindowAspectRatio) / imageAspectRatio * layout.width / 2;\n        bounds.width = layout.height / imageAspectRatio;\n        bounds.height = layout.height;\n        imageScaleFactor = imageData.height / layout.height;\n      } else {\n        bounds.y = (1 / imageAspectRatio - 1 / editingWindowAspectRatio) / (1 / imageAspectRatio) * layout.height / 2;\n        bounds.width = layout.width;\n        bounds.height = layout.width * imageAspectRatio;\n        imageScaleFactor = imageData.width / layout.width;\n      }\n\n      setImageBounds(bounds);\n      setImageScaleFactor(imageScaleFactor);\n      setState(_extends(_extends({}, state), {\n        imageScaleFactor: imageScaleFactor,\n        imageLayout: {\n          height: layout.height,\n          width: layout.width\n        }\n      }));\n    }\n  };\n\n  var getGLLayout = function getGLLayout() {\n    var _state$imageLayout = state.imageLayout,\n        windowHeight = _state$imageLayout.height,\n        windowWidth = _state$imageLayout.width;\n    var windowAspectRatio = windowWidth / windowHeight;\n    var imageHeight = imageData.height,\n        imageWidth = imageData.width;\n    var imageAspectRatio = imageWidth / imageHeight;\n\n    if (windowAspectRatio < imageAspectRatio) {\n      return {\n        width: windowWidth,\n        height: windowWidth / imageAspectRatio\n      };\n    } else {\n      return {\n        height: windowHeight,\n        width: windowHeight * imageAspectRatio\n      };\n    }\n  };\n\n  React.useEffect(function () {\n    onUpdateCropLayout(state.imageLayout);\n  }, [imageData]);\n\n  var onGLContextCreate = function onGLContextCreate(gl) {\n    return __awaiter(_this, void 0, void 0, _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setGLContext(gl);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  };\n\n  return React.createElement(react_native_1.View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, usesGL ? React.createElement(react_native_1.View, {\n    style: styles.glContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 18\n    }\n  }, React.createElement(expo_gl_1.GLView, {\n    style: [{\n      height: 1,\n      width: 1,\n      backgroundColor: \"#ccc\",\n      transform: [{\n        scaleY: -1\n      }]\n    }, getGLLayout()],\n    onContextCreate: onGLContextCreate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  })) : React.createElement(react_native_1.Image, {\n    style: styles.image,\n    source: {\n      uri: imageData.uri\n    },\n    onLayout: function onLayout(_ref) {\n      var nativeEvent = _ref.nativeEvent;\n      return getImageFrame(nativeEvent.layout);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 36\n    }\n  }), isCropping && state.imageLayout.height != null ? React.createElement(ImageCropOverlay_1.ImageCropOverlay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 58\n    }\n  }) : null);\n}\n\nexports.EditingWindow = EditingWindow;\nvar styles = react_native_1.StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  image: {\n    flex: 1,\n    resizeMode: \"contain\"\n  },\n  glContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"sources":["../src/EditingWindow.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditingWindow = void 0;\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst ImageCropOverlay_1 = require(\"./ImageCropOverlay\");\nconst recoil_1 = require(\"recoil\");\nconst Store_1 = require(\"./Store\");\nconst expo_gl_1 = require(\"expo-gl\");\nfunction EditingWindow() {\n    //\n    const [state, setState] = React.useState({\n        imageScaleFactor: null,\n        imageLayout: {\n            height: null,\n            width: null,\n        },\n    });\n    const [imageData] = recoil_1.useRecoilState(Store_1.imageDataState);\n    const [, setImageBounds] = recoil_1.useRecoilState(Store_1.imageBoundsState);\n    const [, setImageScaleFactor] = recoil_1.useRecoilState(Store_1.imageScaleFactorState);\n    const [editingMode] = recoil_1.useRecoilState(Store_1.editingModeState);\n    const [, setGLContext] = recoil_1.useRecoilState(Store_1.glContextState);\n    // Get some readable boolean states\n    const isCropping = editingMode === \"crop\";\n    const isBlurring = editingMode === \"blur\";\n    const usesGL = isBlurring;\n    const getImageFrame = (layout) => {\n        onUpdateCropLayout(layout);\n    };\n    const onUpdateCropLayout = (layout) => {\n        // Check layout is not null\n        if (layout.height != null && layout.width != null) {\n            // Find the start point of the photo on the screen and its\n            // width / height from there\n            const editingWindowAspectRatio = layout.height / layout.width;\n            //\n            const imageAspectRatio = imageData.height / imageData.width;\n            let bounds = { x: 0, y: 0, width: 0, height: 0 };\n            let imageScaleFactor = 1;\n            // Check which is larger\n            if (imageAspectRatio > editingWindowAspectRatio) {\n                // Then x is non-zero, y is zero; calculate x...\n                bounds.x =\n                    (((imageAspectRatio - editingWindowAspectRatio) / imageAspectRatio) *\n                        layout.width) /\n                        2;\n                bounds.width = layout.height / imageAspectRatio;\n                bounds.height = layout.height;\n                imageScaleFactor = imageData.height / layout.height;\n            }\n            else {\n                // Then y is non-zero, x is zero; calculate y...\n                bounds.y =\n                    (((1 / imageAspectRatio - 1 / editingWindowAspectRatio) /\n                        (1 / imageAspectRatio)) *\n                        layout.height) /\n                        2;\n                bounds.width = layout.width;\n                bounds.height = layout.width * imageAspectRatio;\n                imageScaleFactor = imageData.width / layout.width;\n            }\n            setImageBounds(bounds);\n            setImageScaleFactor(imageScaleFactor);\n            setState(Object.assign(Object.assign({}, state), { imageScaleFactor, imageLayout: {\n                    height: layout.height,\n                    width: layout.width,\n                } }));\n        }\n    };\n    const getGLLayout = () => {\n        const { height: windowHeight, width: windowWidth } = state.imageLayout;\n        const windowAspectRatio = windowWidth / windowHeight;\n        const { height: imageHeight, width: imageWidth } = imageData;\n        const imageAspectRatio = imageWidth / imageHeight;\n        // If the window is taller than img...\n        if (windowAspectRatio < imageAspectRatio) {\n            return { width: windowWidth, height: windowWidth / imageAspectRatio };\n        }\n        else {\n            return { height: windowHeight, width: windowHeight * imageAspectRatio };\n        }\n    };\n    React.useEffect(() => {\n        onUpdateCropLayout(state.imageLayout);\n    }, [imageData]);\n    const onGLContextCreate = (gl) => __awaiter(this, void 0, void 0, function* () {\n        setGLContext(gl);\n    });\n    return (<react_native_1.View style={styles.container}>\n      {usesGL ? (<react_native_1.View style={styles.glContainer}>\n          <expo_gl_1.GLView style={[\n        {\n            height: 1,\n            width: 1,\n            backgroundColor: \"#ccc\",\n            transform: [{ scaleY: -1 }],\n        },\n        getGLLayout(),\n    ]} onContextCreate={onGLContextCreate}/>\n        </react_native_1.View>) : (<react_native_1.Image style={styles.image} source={{ uri: imageData.uri }} onLayout={({ nativeEvent }) => getImageFrame(nativeEvent.layout)}/>)}\n      {isCropping && state.imageLayout.height != null ? (<ImageCropOverlay_1.ImageCropOverlay />) : null}\n    </react_native_1.View>);\n}\nexports.EditingWindow = EditingWindow;\nconst styles = react_native_1.StyleSheet.create({\n    container: {\n        flex: 1,\n    },\n    image: {\n        flex: 1,\n        resizeMode: \"contain\",\n    },\n    glContainer: {\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n});\n//# sourceMappingURL=EditingWindow.js.map"]},"metadata":{},"sourceType":"script"}