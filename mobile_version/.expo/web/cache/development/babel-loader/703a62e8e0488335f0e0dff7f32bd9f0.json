{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\develop\\\\pypr\\\\HypeFans\\\\mobile_version\\\\screens\\\\main\\\\create\\\\Editor.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nimport s from \"../../../styles/style\";\nimport text from \"../../../assets/text/text\";\nvar platform = Platform.OS === 'ios' ? true : false;\nimport SvgUri from \"expo-svg-uri\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { ImageEditor } from \"expo-image-editor\";\n\nvar Editor = function (_PureComponent) {\n  _inherits(Editor, _PureComponent);\n\n  var _super = _createSuper(Editor);\n\n  function Editor(props) {\n    var _this;\n\n    _classCallCheck(this, Editor);\n\n    _this = _super.call(this, props);\n\n    _this.pickImage = function _callee() {\n      var result;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.Images,\n                aspect: [9, 16],\n                quality: 1\n              }));\n\n            case 2:\n              result = _context.sent;\n\n              if (!result.cancelled) {\n                _this.setState({\n                  imageUri: result.uri\n                });\n\n                _this.launchEditor();\n              } else _this.state.navigation.goBack();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.launchEditor = function (uri) {\n      _this.setState({\n        editorVisible: true\n      });\n    };\n\n    _this.state = {\n      lang: props.lang,\n      navigation: props.navigation,\n      imageUri: props.route.params.uri,\n      editorVisible: true\n    };\n    return _this;\n  }\n\n  _createClass(Editor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: [s.container, s.backColor],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 7\n        }\n      }, this.state.imageUri && React.createElement(Image, {\n        style: [s.backImageStory, s.pabsolute],\n        source: [{\n          uri: this.state.imageUri\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 34\n        }\n      }), React.createElement(ImageEditor, {\n        visible: this.state.editorVisible,\n        onCloseEditor: function onCloseEditor() {\n          return _this2.setState({\n            editorVisible: false\n          });\n        },\n        imageUri: this.state.imageUri,\n        fixedCropAspectRatio: 16 / 9,\n        minimumCropDimensions: {\n          width: 100,\n          height: 100\n        },\n        onEditingComplete: function onEditingComplete(result) {\n          return _this2.setState({\n            imageUri: result.uri\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: [s.btn56, s.center, s.pabsolute, s.mh15, s.statBarMargin],\n        activeOpacity: 0.7,\n        onPress: function onPress() {\n          _this2.state.navigation.goBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }\n      }, React.createElement(SvgUri, {\n        width: \"25\",\n        height: \"25\",\n        source: require(\"../../../assets/images/close.svg\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }\n      })), React.createElement(TouchableOpacity, {\n        style: [s.orangeBtn, s.center, s.mt15, s.pabsolute, {\n          width: width - 30,\n          bottom: 50\n        }],\n        activeOpacity: 0.9,\n        onPress: function onPress() {\n          return _this2.state.navigation.navigate('Create');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: [s.text18, s.factorBold],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }, text[this.state.lang].public)));\n    }\n  }]);\n\n  return Editor;\n}(PureComponent);\n\nexport { Editor as default };","map":{"version":3,"sources":["D:/develop/pypr/HypeFans/mobile_version/screens/main/create/Editor.js"],"names":["React","PureComponent","Dimensions","get","width","height","s","text","platform","Platform","OS","SvgUri","ImagePicker","ImageEditor","Editor","props","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","aspect","quality","result","cancelled","setState","imageUri","uri","launchEditor","state","navigation","goBack","editorVisible","lang","route","params","container","backColor","backImageStory","pabsolute","btn56","center","mh15","statBarMargin","require","orangeBtn","mt15","bottom","navigate","text18","factorBold","public"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;;;;;;;;;;;;;;sBAgB0BC,UAAU,CAACC,GAAX,CAAe,QAAf,C;IAAlBC,K,mBAAAA,K;IAAOC,M,mBAAAA,M;;AAEf,OAAOC,CAAP;AACA,OAAOC,IAAP;AAGA,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,EAAT,KAAgB,KAAhB,GAAwB,IAAxB,GAA+B,KAA9C;AAEA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;AACA,SAASC,WAAT,QAA4B,mBAA5B;;IAEqBC,M;;;;;AAEnB,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UA+BnBC,SA/BmB,GA+BP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACSJ,WAAW,CAACK,uBAAZ,CAAoC;AACrDC,gBAAAA,UAAU,EAAEN,WAAW,CAACO,gBAAZ,CAA6BC,MADY;AAGrDC,gBAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAH6C;AAIrDC,gBAAAA,OAAO,EAAE;AAJ4C,eAApC,CADT;;AAAA;AACNC,cAAAA,MADM;;AAUV,kBAAI,CAACA,MAAM,CAACC,SAAZ,EAAuB;AAErB,sBAAKC,QAAL,CAAc;AAAEC,kBAAAA,QAAQ,EAAEH,MAAM,CAACI;AAAnB,iBAAd;;AAIA,sBAAKC,YAAL;AAED,eARD,MAQO,MAAKC,KAAL,CAAWC,UAAX,CAAsBC,MAAtB;;AAlBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA/BO;;AAAA,UAoDnBH,YApDmB,GAoDJ,UAACD,GAAD,EAAS;AAEtB,YAAKF,QAAL,CAAc;AAAEO,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACD,KAvDkB;;AAEjB,UAAKH,KAAL,GAAa;AACXI,MAAAA,IAAI,EAAElB,KAAK,CAACkB,IADD;AAEXH,MAAAA,UAAU,EAAEf,KAAK,CAACe,UAFP;AAGXJ,MAAAA,QAAQ,EAAEX,KAAK,CAACmB,KAAN,CAAYC,MAAZ,CAAmBR,GAHlB;AAIXK,MAAAA,aAAa,EAAE;AAJJ,KAAb;AAFiB;AASlB;;;;WAGD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;WAeA,gCAAuB,CAEtB;;;WA4BD,kBAAS;AAAA;;AACP,aACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE,CAAC1B,CAAC,CAAC8B,SAAH,EAAc9B,CAAC,CAAC+B,SAAhB,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,KAAKR,KAAL,CAAWH,QAAX,IAAuB,oBAAC,KAAD;AACrB,QAAA,KAAK,EAAE,CAACpB,CAAC,CAACgC,cAAH,EAAmBhC,CAAC,CAACiC,SAArB,CADc;AAErB,QAAA,MAAM,EAAE,CAAC;AAAEZ,UAAAA,GAAG,EAAE,KAAKE,KAAL,CAAWH;AAAlB,SAAD,CAFa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAF3B,EAQE,oBAAC,WAAD;AACE,QAAA,OAAO,EAAE,KAAKG,KAAL,CAAWG,aADtB;AAEE,QAAA,aAAa,EAAE;AAAA,iBAAM,MAAI,CAACP,QAAL,CAAc;AAAEO,YAAAA,aAAa,EAAE;AAAjB,WAAd,CAAN;AAAA,SAFjB;AAGE,QAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWH,QAHvB;AAIE,QAAA,oBAAoB,EAAE,KAAK,CAJ7B;AAME,QAAA,qBAAqB,EAAE;AACrBtB,UAAAA,KAAK,EAAE,GADc;AAErBC,UAAAA,MAAM,EAAE;AAFa,SANzB;AAUE,QAAA,iBAAiB,EAAE,2BAACkB,MAAD;AAAA,iBAAY,MAAI,CAACE,QAAL,CAAc;AAAEC,YAAAA,QAAQ,EAAEH,MAAM,CAACI;AAAnB,WAAd,CAAZ;AAAA,SAVrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EAqBE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAE,CAACrB,CAAC,CAACkC,KAAH,EAAUlC,CAAC,CAACmC,MAAZ,EAAoBnC,CAAC,CAACiC,SAAtB,EAAiCjC,CAAC,CAACoC,IAAnC,EAAyCpC,CAAC,CAACqC,aAA3C,CAAzB;AACE,QAAA,aAAa,EAAE,GADjB;AAEE,QAAA,OAAO,EAAE,mBAAM;AACb,UAAA,MAAI,CAACd,KAAL,CAAWC,UAAX,CAAsBC,MAAtB;AACD,SAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAME,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,IAAd;AAAmB,QAAA,MAAM,EAAC,IAA1B;AACE,QAAA,MAAM,EAAEa,OAAO,oCADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,CArBF,EA+BE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAE,CAACtC,CAAC,CAACuC,SAAH,EAAcvC,CAAC,CAACmC,MAAhB,EAAwBnC,CAAC,CAACwC,IAA1B,EAAgCxC,CAAC,CAACiC,SAAlC,EAA6C;AAAEnC,UAAAA,KAAK,EAAEA,KAAK,GAAG,EAAjB;AAAqB2C,UAAAA,MAAM,EAAE;AAA7B,SAA7C,CAAzB;AACE,QAAA,aAAa,EAAE,GADjB;AAEE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAAClB,KAAL,CAAWC,UAAX,CAAsBkB,QAAtB,CAA+B,QAA/B,CAAN;AAAA,SAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE,CAAC1C,CAAC,CAAC2C,MAAH,EAAW3C,CAAC,CAAC4C,UAAb,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwC3C,IAAI,CAAC,KAAKsB,KAAL,CAAWI,IAAZ,CAAJ,CAAsBkB,MAA9D,CAJF,CA/BF,CADF;AAyCD;;;;EArGiClD,a;;SAAfa,M","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport {\r\n  Image,\r\n  Platform,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  TouchableWithoutFeedback,\r\n  KeyboardAvoidingView,\r\n  Keyboard,\r\n  View,\r\n  Dimensions,\r\n} from 'react-native';\r\n\r\nconst { width, height } = Dimensions.get(\"screen\")\r\n\r\nimport s from '../../../styles/style'\r\nimport text from '../../../assets/text/text'\r\n\r\n\r\nlet platform = Platform.OS === 'ios' ? true : false\r\n\r\nimport SvgUri from \"expo-svg-uri\"\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { ImageEditor } from \"expo-image-editor\";\r\n\r\nexport default class Editor extends PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lang: props.lang,\r\n      navigation: props.navigation,\r\n      imageUri: props.route.params.uri,\r\n      editorVisible: true,\r\n\r\n    };\r\n  }\r\n\r\n\r\n  async componentDidMount() {\r\n    //this.props.setTab(false)\r\n\r\n    // (async () => {\r\n    //   if (Platform.OS !== 'web') {\r\n    //     const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n    //     if (status !== 'granted') {\r\n    //       alert('Sorry, we need camera roll permissions to make this work!');\r\n    //       this.state.navigation.goBack()\r\n    //     } else this.pickImage()\r\n    //   }\r\n    // })();\r\n    //this.launchEditor()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //this.props.setTab(true)\r\n  }\r\n\r\n  pickImage = async () => {\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n      //allowsEditing: true,\r\n      aspect: [9, 16],\r\n      quality: 1,\r\n    });\r\n\r\n    //console.log(result);\r\n\r\n    if (!result.cancelled) {\r\n\r\n      this.setState({ imageUri: result.uri })\r\n\r\n      // TODO: editor\r\n      //setTimeout(()=>this.launchEditor(), 100)\r\n      this.launchEditor()\r\n    \r\n    } else this.state.navigation.goBack()\r\n  };\r\n\r\n  launchEditor = (uri) => {\r\n\r\n    this.setState({ editorVisible: true })\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <View style={[s.container, s.backColor]}>\r\n        {\r\n          this.state.imageUri && <Image\r\n            style={[s.backImageStory, s.pabsolute]}\r\n            source={[{ uri: this.state.imageUri }]}\r\n          />\r\n        }\r\n\r\n        <ImageEditor\r\n          visible={this.state.editorVisible}\r\n          onCloseEditor={() => this.setState({ editorVisible: false })}\r\n          imageUri={this.state.imageUri}\r\n          fixedCropAspectRatio={16 / 9}\r\n          //lockAspectRatio={aspectLock}\r\n          minimumCropDimensions={{\r\n            width: 100,\r\n            height: 100,\r\n          }}\r\n          onEditingComplete={(result) => this.setState({ imageUri: result.uri })}\r\n        />\r\n\r\n        <TouchableOpacity style={[s.btn56, s.center, s.pabsolute, s.mh15, s.statBarMargin]}\r\n          activeOpacity={0.7}\r\n          onPress={() => {\r\n            this.state.navigation.goBack()\r\n          }}\r\n        >\r\n          <SvgUri width=\"25\" height=\"25\"\r\n            source={require('../../../assets/images/close.svg')} />\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity style={[s.orangeBtn, s.center, s.mt15, s.pabsolute, { width: width - 30, bottom: 50 }]}\r\n          activeOpacity={0.9}\r\n          onPress={() => this.state.navigation.navigate('Create')}\r\n        >\r\n          <Text style={[s.text18, s.factorBold]}>{text[this.state.lang].public}</Text>\r\n        </TouchableOpacity>\r\n\r\n      </View >\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}